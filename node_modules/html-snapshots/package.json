{
  "_args": [
    [
      {
        "raw": "html-snapshots@>= 0.14.0",
        "scope": null,
        "escapedName": "html-snapshots",
        "name": "html-snapshots",
        "rawSpec": ">= 0.14.0",
        "spec": ">=0.14.0",
        "type": "range"
      },
      "/home/einjel/Desktop/iCruits/websource/node_modules/grunt-html-snapshots"
    ]
  ],
  "_from": "html-snapshots@>=0.14.0",
  "_id": "html-snapshots@0.14.0",
  "_inCache": true,
  "_location": "/html-snapshots",
  "_nodeVersion": "6.9.4",
  "_npmOperationalInternal": {
    "host": "packages-18-east.internal.npmjs.com",
    "tmp": "tmp/html-snapshots-0.14.0.tgz_1485465001376_0.3437321176752448"
  },
  "_npmUser": {
    "name": "localnerve",
    "email": "alex@localnerve.com"
  },
  "_npmVersion": "3.10.10",
  "_phantomChildren": {
    "aws-sign2": "0.6.0",
    "aws4": "1.6.0",
    "caseless": "0.11.0",
    "combined-stream": "1.0.5",
    "core-util-is": "1.0.2",
    "es6-promise": "4.0.5",
    "extend": "3.0.1",
    "extract-zip": "1.5.0",
    "forever-agent": "0.6.1",
    "form-data": "1.0.1",
    "glob": "7.0.6",
    "graceful-fs": "4.1.11",
    "har-validator": "2.0.6",
    "hasha": "2.2.0",
    "hawk": "3.1.3",
    "http-signature": "1.1.1",
    "inherits": "2.0.3",
    "is-typedarray": "1.0.0",
    "isarray": "1.0.0",
    "isstream": "0.1.2",
    "json-stringify-safe": "5.0.1",
    "jsonfile": "2.4.0",
    "kew": "0.7.0",
    "klaw": "1.3.1",
    "mime-types": "2.1.15",
    "node-uuid": "1.4.8",
    "oauth-sign": "0.8.2",
    "path-is-absolute": "1.0.1",
    "process-nextick-args": "1.0.7",
    "progress": "1.1.8",
    "request-progress": "2.0.1",
    "stringstream": "0.0.5",
    "tough-cookie": "2.3.2",
    "tunnel-agent": "0.4.3",
    "util-deprecate": "1.0.2",
    "which": "1.2.14"
  },
  "_requested": {
    "raw": "html-snapshots@>= 0.14.0",
    "scope": null,
    "escapedName": "html-snapshots",
    "name": "html-snapshots",
    "rawSpec": ">= 0.14.0",
    "spec": ">=0.14.0",
    "type": "range"
  },
  "_requiredBy": [
    "/grunt-html-snapshots"
  ],
  "_resolved": "https://registry.npmjs.org/html-snapshots/-/html-snapshots-0.14.0.tgz",
  "_shasum": "d1b802c4f5f0df89dc35a3bc7cffad41cff67ad4",
  "_shrinkwrap": null,
  "_spec": "html-snapshots@>= 0.14.0",
  "_where": "/home/einjel/Desktop/iCruits/websource/node_modules/grunt-html-snapshots",
  "author": {
    "name": "Alex Grant",
    "email": "alex@localnerve.com",
    "url": "http://localnerve.com"
  },
  "bugs": {
    "url": "https://github.com/localnerve/html-snapshots/issues"
  },
  "contributors": [
    {
      "name": "Alex Grant",
      "email": "alex@localnerve.com"
    }
  ],
  "dependencies": {
    "async": "2.x || 1.x",
    "async-lock": "~0.3.9",
    "combine-errors": "^3.0.3",
    "lodash": "^4.0.0",
    "mkdirp": "^0.5.1",
    "phantomjs-prebuilt": "2.1.13",
    "request": "^2.67.0",
    "rimraf": "^2.5.0",
    "xml2js": "~0.4.16"
  },
  "description": "A selector-based html snapshot tool using PhantomJS that sources sitemap.xml, robots.txt, or arbitrary input",
  "devDependencies": {
    "coveralls": "^2.11.12",
    "eslint": "^3.13.0",
    "express": "^4.13.3",
    "istanbul": "^0.4.2",
    "mocha": "^3.0.1",
    "precommit-hook": "^3.0.0",
    "server-destroy": "^1.0.1",
    "sitemap-xml": "~0.1.0"
  },
  "directories": {},
  "dist": {
    "shasum": "d1b802c4f5f0df89dc35a3bc7cffad41cff67ad4",
    "tarball": "https://registry.npmjs.org/html-snapshots/-/html-snapshots-0.14.0.tgz"
  },
  "engines": {
    "node": ">= 4.x"
  },
  "gitHead": "c48edf06e0366e7a05c16904ae0eb3089d47c0c3",
  "homepage": "https://github.com/localnerve/html-snapshots",
  "keywords": [
    "SEO",
    "html",
    "snapshots",
    "selector",
    "ajax",
    "SPA",
    "robots.txt",
    "sitemap.xml"
  ],
  "license": "MIT",
  "main": "./lib/html-snapshots",
  "maintainers": [
    {
      "name": "localnerve",
      "email": "alex@localnerve.com"
    }
  ],
  "name": "html-snapshots",
  "optionalDependencies": {},
  "pre-commit": [
    "lint"
  ],
  "readme": "# [html-snapshots](http://github.com/localnerve/html-snapshots)\n\n[![npm version](https://badge.fury.io/js/html-snapshots.svg)](http://badge.fury.io/js/html-snapshots)\n[![Build Status](https://api.travis-ci.org/localnerve/html-snapshots.svg?branch=master)](http://travis-ci.org/localnerve/html-snapshots)\n[![Coverage Status](https://img.shields.io/coveralls/localnerve/html-snapshots.svg)](https://coveralls.io/r/localnerve/html-snapshots?branch=master)\n[![Dependency Status](https://david-dm.org/localnerve/html-snapshots.svg)](https://david-dm.org/localnerve/html-snapshots)\n[![devDependency Status](https://david-dm.org/localnerve/html-snapshots/dev-status.svg)](https://david-dm.org/localnerve/html-snapshots#info=devDependencies)\n[![Codacy Badge](https://www.codacy.com/project/badge/03d414fc2e264ef4b40456aae5b52108)](https://www.codacy.com/public/alex/html-snapshots)\n\n> Takes html snapshots of your site's crawlable pages when an element you select is rendered.\n\n## Contents\n+ [Overview](#overview)\n+ [Getting Started](#getting-started)\n+ [Grunt Task](https://github.com/localnerve/grunt-html-snapshots)\n+ [More Information](#more-information)\n  + [Breaking Changes](#breaking-changes)\n+ [API Reference](#api)\n+ [Example Usage](#example-usage)\n  + [Per-page Selectors](#example---per-page-selectors-and-timeouts)\n  + [Per-page Output Paths](#example---per-page-special-output-paths)\n  + [Per-page jQuery](#example---per-page-selectors-and-jquery)\n  + [Array Input](#example---array)\n  + [Array Input DRY](/examples/html5rocks)\n  + [Sitemap Index](/examples/sitemap-index)\n  + [Process Limit](/examples/process-limit)\n  + [Script Removal](#example---remote-robotstxt-remove-script-tags-from-html-snapshots)\n  + [Custom Filters](/examples/custom)\n  + [Debug PhantomJS w/Verbose Output](/examples/verbose)\n  + [Debug PhantomJS w/Attach](/examples/debug-phantomjs)\n+ [Option Reference](#options)\n  + [Input Options](#input-control-options)\n  + [Output Options](#output-control-options)\n  + [Snapshot Options](#snapshot-control-options)\n  + [Process Options](#process-control-options)\n+ [Rewrite and Middleware Examples](#example-rewrite-rule)\n+ [Worker Process and Middleware Article and Examples](/docs/example-heroku-redis.md)\n+ [License](#license)\n\n## Overview\nhtml-snapshots is a flexible html snapshot library that uses PhantomJS to take html snapshots of your webpages served from your site. A snapshot is only taken when a specified selector is detected visible in the output html. This tool is useful when your site is largely ajax content, or an SPA, and you want your dynamic content indexed by search engines.\n\nhtml-snapshots gets urls to process from either a robots.txt or sitemap.xml. Alternatively, you can supply an array with completely arbitrary urls, or a line delimited textfile with arbitrary host-relative paths.\n\n## Getting Started\n\n### Installation\nThe simplest way to install html-snapshots is to use [npm](http://npmjs.org), just `npm\ninstall html-snapshots` will download html-snapshots and all dependencies.\n\n### Gulp Task\nThis is a node library that just works with gulp as-is.\n\n### Grunt Task\nIf you are interested in the grunt task that uses this library, check out [grunt-html-snapshots](http://github.com/localnerve/grunt-html-snapshots).\n\n## More Information\nHere are some [background and other notes](/docs/notes.md) regarding this project.\n  + [Why Does This Library Exist?](/docs/notes.md#why-does-this-exist)\n  + [How To Use Without Knowing About Page Content](/docs/notes.md#what-if-i-dont-know-about-the-rendered-page-content)\n  + [Caveats](/docs/notes.md#caveats)\n\n### Process Model\nhtml-snapshots takes snapshots in parallel, each page getting its own PhantomJS process. Each PhantomJS process dies after snapshotting one page. You can limit the number of PhantomJS processes that can ever run at once with the `processLimit` option. This effectively sets up a process pool for PhantomJS instances. The default processLimit is 4 PhantomJS instances. When a PhantomJS process dies, and another snapshot needs to be taken, a new PhantomJS process is spawned to take the vacant slot. This continues until a `processLimit` number of processes are running at once.\n\n### Breaking Changes\n\n#### Introduced in v0.14.x\n##### Run method return value\nThe library `run` method no longer returns a boolean value indicating a successful start. Instead, it returns a Promise that resolves to an array of file paths to completed snapshots, or error on failure. The `run` method's second argument, a completion callback, is now **optional** and provided for compatibility only. If you supply one, it will be called, but the Promise will also resolve, so it is not needed.\n\n##### Dropped support for Node <= 0.12\nNode 4.x is now the lowest version of Node supported. 0.12 (or less) is EOL and unsupported by this library from 0.14 on.\n\n#### Introduced in v0.6.x\njQuery selectors are no longer supported by default. To restore the previous behavior, set the `useJQuery` option to `true`.\nThe upside is jQuery is no longer required to be loaded by the page being snapshotted. However, if you use jQuery selectors, or selectors not supported by [querySelector](https://developer.mozilla.org/en-US/docs/Web/API/document.querySelector), the page being snapshotted must load jQuery.\n\n## API\nThe api is just one `run` method that returns a Promise.\n\n### *Promise* run (options[, callback])\nA method that takes [options](#options) and an optional callback. Returns a Promise.  \n**Syntax:**\n```javascript\nvar htmlSnapshots = require('html-snapshots');\n\nhtmlSnapshots.run (options[, callback])\n.then(function (completed) {\n  // `completed` is an array of paths to the completed snapshots.\n})\n.catch(function (errorObject) {\n  // `errorObject` is an instance of Error\n  // `errorObject.completed` is an array of paths to the snapshots that did successfully complete.\n  // `errorObject.notCompleted` is an array of paths to files that DID NOT successfully complete.\n});\n```\n#### Callback\nThe callback is optional because the run method returns a Promise that resolves on completion. If you supply a callback, it will be called, but the Promise will ALSO resolve. Callback usage is deprecated, and is made available for compatibility with older versions.\n\nSignature of the optional callback:\n```javascript\ncallback (errorObject, arrayOfPathsToCompletedSnapshots)\n```\n*For the callback, in the error case, the errorObject does not have the new extra properties `completed` and `notCompleted`. However, `arrayOfPathsToCompletedSnapshots` is supplied, and contains the paths to the snapshots that successfully completed.*\n\n## Example Usage\nSimple examples to demonstrate the usage of [options](#options).  \n\nA growing showcase of runnable examples can be found [here](/examples).\n\nAn older (version 0.13.2), more in depth usage example is located in this [article](/docs/example-heroku-redis.md) that includes explanation and code of a real usage featuring dynamic app routes, ExpressJS, Heroku, and more.\n\n### Simple example\n```javascript\nvar htmlSnapshots = require('html-snapshots');\nhtmlSnapshots.run({\n  source: \"/path/to/robots.txt\",\n  hostname: \"exampledomain.com\",\n  outputDir: \"./snapshots\",\n  outputDirClean: true,\n  selector: \"#dynamic-content\"\n})\n.then(function (completed) {\n  // completed is an array of full file paths to the completed snapshots.\n})\n.catch(function (error) {\n  // error is an Error instance.\n  // error.completed is an array of snapshot file paths that were completed.\n  // error.notCompleted is an array of file paths that did NOT complete.\n});\n```\nThis reads the urls from your robots.txt and produces snapshots in the ./snapshots directory. In this example, a selector named \"#dynamic-content\" appears in all pages across the site. Once this selector is visible in a page, the html snapshot is taken.\n\n### Example - Per page selectors and timeouts\n```javascript\nvar htmlSnapshots = require('html-snapshots');\nhtmlSnapshots.run({\n  input: \"sitemap\",\n  source: \"/path/to/sitemap.xml\",\n  outputDir: \"./snapshots\",\n  outputDirClean: true,\n  selector: {\n    \"http://mysite.com\": \"#home-content\",\n    \"__default\": \"#dynamic-content\"\n  },\n  timeout: {\n    \"http://mysite.com/superslowpage\": 20000,\n    \"__default\": 10000\n  }\n})\n.then(function (completed) {\n  // completed is an array of full file paths to the completed snapshots.\n})\n.catch(function (error) {\n  // error is an Error instance.\n  // error.completed is an array of snapshot file paths that were completed.\n  // error.notCompleted is an array of file paths that did NOT complete.\n});\n```\nThis reads the urls from your sitemap.xml and produces snapshots in the ./snapshots directory. In this example, a selector named \"#dynamic-content\" appears in all pages across the site except the home page, where \"#home-content\" appears \\(the appearance of a selector in the output triggers the snapshot\\). Finally, a default timeout of 10000 ms is set on all pages except http://mysite.com/superslowpage, where it waits 20000 ms.\n\n### Example - Per page special output paths\n```javascript\nvar htmlSnapshots = require('html-snapshots');\nhtmlSnapshots.run({\n  input: \"sitemap\",\n  source: \"/path/to/sitemap.xml\",\n  outputDir: \"./snapshots\",\n  outputDirClean: true,\n  outputPath: {\n    \"http://mysite.com/services/?page=1\": \"services/page/1\",\n    \"http://mysite.com/services/?page=2\": \"services/page/2\"\n  },\n  selector: \"#dynamic-content\"\n})\n.then(function (completed) {\n  // completed is an array of full file paths to the completed snapshots.\n})\n.catch(function (error) {\n  // error is an Error instance.\n  // error.completed is an array of snapshot file paths that were completed.\n  // error.notCompleted is an array of file paths that did NOT complete.\n});\n```\nThis example implies there are a couple of pages with query strings in sitemap.xml, and we don't want html-snapshots to create directories with query string characters in the names. We would also have a rewrite rule that reflects this same mapping when `_escaped_fragment_` shows up in the querystring of a request so we serve the snapshot from the appropriate directory.\n\n### Example - Per page selectors and jQuery\n```javascript\nvar htmlSnapshots = require('html-snapshots');\nhtmlSnapshots.run({\n  source: \"/path/to/robots.txt\",\n  hostname: \"mysite.com\",\n  outputDir: \"./snapshots\",\n  outputDirClean: true,\n  selector: {\n    \"__default\": \"#dynamic-content\",\n    \"/jqpage\": \"A-Selector-Not-Supported-By-querySelector\"\n  },\n  useJQuery: {\n    \"/jqpage\": true,\n    \"__default\": false\n  }\n})\n.then(function (completed) {\n  // completed is an array of full file paths to the completed snapshots.\n})\n.catch(function (error) {\n  // error is an Error instance.\n  // error.completed is an array of snapshot file paths that were completed.\n  // error.notCompleted is an array of file paths that did NOT complete.\n});\n```\nThis reads the urls from your robots.txt and produces snapshots in the ./snapshots directory. In this example, a selector named \"#dynamic-content\" appears in all pages across the site except in \"/jqpage\", where a selector not supported by [querySelector](https://developer.mozilla.org/en-US/docs/Web/API/document.querySelector) is used. Further, \"/jqpage\" loads jQuery itself \\(required\\). All the other pages don't need to use special selectors, so the default is set to `false`. Notice that since a robots.txt input is used, full URLs are **not** used to match selectors. Instead, paths \\(and QueryStrings and any Hashes\\) are used, just as specified in the robots.txt file itself.\n\n### Example - Array\n```javascript\nvar htmlSnapshots = require('html-snapshots');\nhtmlSnapshots.run({\n  input: \"array\",\n  source: [\"http://mysite.com\", \"http://mysite.com/contact\", \"http://mysite.com:82/special\"],\n  outputDir: \"./snapshots\",\n  outputDirClean: true,  \n  selector: \"#dynamic-content\"\n})\n.then(function (completed) {\n  // completed is an array of full file paths to the completed snapshots.\n})\n.catch(function (error) {\n  // error is an Error instance.\n  // error.completed is an array of snapshot file paths that were completed.\n  // error.notCompleted is an array of file paths that did NOT complete.\n});\n```\nGenerates snapshots for \"/\", \"/contact\", and \"/special\" from mysite.com. \"/special\" uses port 82. All use http protocol. Array input can be powerful, check out a [simple example](/examples/simple-promise), or a more [complex example](/examples/html5rocks).\n\n### Example - Remote robots.txt, remove script tags from html snapshots\n```javascript\nvar assert = require(\"assert\");\nvar fs = require(\"fs\");\nvar htmlSnapshots = require(\"html-snapshots\");\n\nhtmlSnapshots.run({\n  source: \"http://localhost/robots.txt\",\n  hostname: \"localhost\",\n  outputDir: \"./snapshots\",\n  outputDirClean: true,  \n  selector: \"#dynamic-content\",\n  snapshotScript: {\n    script: \"removeScripts\"\n  }\n})\n.then(function (completed) {\n  completed.forEach(function (snapshotFile) {\n    var content = fs.readFileSync(snapshotFile, { encoding: \"utf8\"});\n    assert.equal(false, /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi.test(content));\n  });\n  // It didn't throw b/c there are no script tags in the html snapshots\n  console.log('stripped all script tags as expected');\n})\n.catch(function (error) {\n  // error is an Error instance.\n  // error.completed is an array of snapshot file paths that were completed.\n  // error.notCompleted is an array of file paths that did NOT complete.\n});\n```\nRemoves all script tags from the output of the html snapshot. Custom filters are also supported, see the customFilter Example in the explanation of the `snapshotScript` option. Also, check out the concrete [example](/examples/custom).\n\n## Options\n> Every option has a default value except `outputDir`.\n\n### Input Control Options\n\n  + `input`\n    + default: `\"robots\"`\n    + Specifies the input generator to be used to produce the urls.\n\n        Possible *values*:\n\n        + `\"sitemap\"` Supply urls from a local or remote sitemap.xml file. Gzipped sitemaps are supported.\n        + `\"sitemap-index\"` Supply urls from a local or remote sitemap-index.xml file. Gzipped sitemap indexes are supported.\n        + `\"array\"`, supply arbitrary urls from a javascript array.\n        + `\"robots\"` Supply urls from a local or remote robots.txt file. Robots.txt files with wildcards are NOT supported - Use \"sitemap\" instead.\n        + `\"textfile\"` Supply urls from a local line-oriented text file in the style of robots.txt\n\n  + `source`\n    + default: `\"./robots.txt\"`, `\"./sitemap.xml\"`, `\"./sitemap-index.xml\"`, `\"./line.txt\"`, or `[]`, depending on the input generator.\n    + Specifies the input source. This must be a valid array or the location of a robots, text, or sitemap file for the corresponding input generator. robots.txt, sitemap.xml(.gz), sitemap-index.xml(.gz) can be local or remote. However, for the array input generator, this must be an array of urls.\n\n##### Sitemap/Sitemap-Index Only Input Options\n\n  + `sitemapPolicy`\n    + default: `false`\n    + For use only with the sitemap and sitemap-index input generators. When true, lastmod and/or changefreq sitemap url child elements can be used to determine if a snapshot needs to be taken. Here are the possibilities for usage:\n      + Both lastmod and changefreq tags are specified alongside loc tags in the sitemap. In this case, both of these tags are used to determine if the url is out-of-date and needs a snapshot.\n      + Only a lastmod tag is specified alongside loc tags in the sitemap. In this case, if an output file from a previous run is found for the url loc, then the file modification time is compared against the lastmod value to see if the url is out-of-date and needs a snapshot.\n      + Only a changefreq tag is specified alongside loc tags in the sitemap. In this case, if an output file from a previous run is found for the url loc, then the last file modification time is used as a timespan \\(from now\\) and compared against the given changefreq to see if the url is out-of-date and needs a snapshot.\n\n    Note that for `sitemap-index`, only [lastmod](https://www.sitemaps.org/protocol.html#sitemapIndexTagDefinitions) policy element is available as a policy control.\n\n    Not all url elements in a sitemap have to have lastmod and/or changefreq \\(those tags are optional, unlike loc\\), but the urls you want to be able to skip \\(if they are current\\) must make use of those tags. You can intermix usage of these tags, as long as the requirements are met for making an age determination. If a determination on age cannot be made for any reason, the url is processed normally. For more info on sitemap tags and acceptable values, read the [wikipedia](http://en.wikipedia.org/wiki/Sitemaps) page.\n\n  + `sitemapOutputDir`\n    + default: `_sitemaps_`\n    + For use only with the sitemap-index input generator, this option directs the storage of sitemaps locally. It is a string that defines the name of the subdirectory under the `outputDir` where sitemaps are stored.\n    Locally stored sitemaps are used for age determinations with incoming lastmod tags. If this option is falsy, it will prevent sitemap storage and thereby disable sitemapPolicy for sitemaps referenced in a sitemap-index.\n\n    The [examples](/examples) directory contains [sitemap-index](/examples/sitemap-index) and [sitemap](/examples/custom) usage examples.\n\n##### Robots and Textfile Only Input Options\n\n  + `hostname`\n    + default: `\"localhost\"`\n    + Specifies the hostname to use for paths found in a robots.txt or textfile. Applies to all pages. This option is ignored if you are using the sitemap or array input generators.\n\n  + `port`\n    + default: 80\n    + Specifies the port to use for all paths found in a robots.txt or textfile. This option is ignored if you are using the sitemap or array input generators.\n\n  + `auth`\n    + default: none\n    + Specifies the old-school authentication portion of the url. Applies to all path found in a robots.txt or textfile.\n\n  + `protocol`\n    + default: `\"http\"`\n    + Specifies the protocol to use for all paths found in a robots.txt or textfile. This option is ignored if you are using the sitemap or array input generators.\n\n### Output Control Options\n\n  + `outputDir`\n    + default: none\n    + **Required** \\(you must specify a value\\). Specifies the root output directory to put all the snapshot files in. Paths to the snapshot files in the output directory are defined by the paths in the urls themselves. The snapshot files are always named \"index.html\".\n\n  + `outputDirClean`\n    + default: `false`\n    + Specifies if html-snapshots should clean the output directory before it creates the snapshots. If you are using sitemapPolicy and only specifying one of lastmod or changefreq in your sitemap \\(thereby relying on file modification times on output files from a previous run\\) this value must be false.\n\n  + `outputPath`\n    + default: none\n    + Specifies per url overrides to the generated snapshot output path. The default output path for a snapshot file, while rooted at outputDir, is simply an echo of the input path - plus any arguments. Depending on your urls, your `_escaped_fragment_` rewrite rule (see below), or the characters allowed in directory names in your environment, it might be necessary to use this option to change the output paths.\n\n        The value can be one of these *javascript types*:\n\n        `\"object\"` If the value is an object, it must be a key/value pair object where the key must match the url (or path in the case of robots.txt style) found by the input generator.\n\n        `\"function\"` If the value is a function, it is called for every page and passed a single argument that is the url (or path in the case of robots.txt style) found in the input. The value returned for a given page must be a string that can be used on the filesystem for a path.\n\n  **Notes:**   \n  + If you already have pretty urls, this option may not be wanted/needed.\n  + The output file name is always \"index.html\".\n\n### Snapshot Control Options\n\n  + `selector`\n    + default: `\"body\"`\n    + Specifies the selector to find in the output before taking the snapshot. The appearence of this selector in the output triggers a snapshot to be taken.\n\n        The value can be one of these *javascript types*:\n\n        `\"string\"` If the value is a string, it is used for every page.       \n\n        `\"object\"` If the value is an object, it is interpreted as key/value pairs where the key must match the url (or path in the case of robots.txt style) found by the input generator. This allows you to specify selectors for individual pages. The reserved key \"__default\" allows you to specify the default selector so you don't have to specify a selector for every individual page.\n\n        `\"function\"` If the value is a function, it is called for every page and passed a single argument that is the url (or path in the case of robots.txt style) found in the input. The function must return a value to use for this option for the page it is given. The value returned for a given page must be a string.\n\n    NOTE: By default, selectors must conform to [this spec](http://www.w3.org/TR/selectors-api/#grammar), as they are used by [querySelector](https://developer.mozilla.org/en-US/docs/Web/API/document.querySelector). If you need selectors not supported by this, you must specify the `useJQuery` option, and load jQuery in your page.\n\n  + `useJQuery`\n    + default: `false`\n    + Specifies to use jQuery selectors to detect when to snapshot a page. Please note that you cannot use these selectors if the page to be snapshotted does not load jQuery itself. To return to the behavior prior to v0.6.x, set this to `true`.\n\n        The value can be one of these *javascript types*:\n\n        `\"boolean\"` If the value is a boolean, it is used for every page. Note that if it is any scalar type such as \"string\" or \"number\", it will be interpreted as a boolean using javascript rules. Coerced string values \"true\", \"yes\", and \"1\" are specifically true, all others are false.\n\n        `\"object\"` If the value is an object, it is interpreted as key/value pairs where the key must match the url (or path in the case of robots.txt style) found by the input generator. This allows you to specify the use of jQuery for individual pages. The reserved key \"__default\" allows you to specify a default jQuery usage so you don't have to specify usage for every individual page.\n\n        `\"function\"` If the value is a function, it is called for every page and passed a single argument that is the url (or path in the case of robots.txt style) found in the input. The function must return a value to use for this option for the page it is given. The value returned for a given page must be a boolean.\n\n    NOTE: You do not *have to* use this option if your page uses jQuery. You only need this if your selector is not supported by [querySelector](https://developer.mozilla.org/en-US/docs/Web/API/document.querySelector). However, if you do use this option, the page being snapshotted must load jQuery itself.\n\n  + `snapshotScript`\n    + default: This library's [default](/lib/phantom/default.js) snapshot script. This script runs in PhantomJS and takes the snapshot when the supplied selector becomes visible.\n    + Specifies the PhantomJS script to run to actually produce the snapshot. The script supplied in this option is run per url (or path) by html-snapshots in a separate PhantomJS process. Applies to all pages.\n\n        The value can be one of these *javascript types*:\n\n        `\"string\"` If the value is a string, it must an absolute path to a custom PhantomJS script you supply. html-snapshots will spawn a separate PhantomJS instance to run your snapshot script and give it the following [arguments](http://phantomjs.org/api/system/property/args.html):\n          + `system.args[0]` The path to your PhantomJS script.\n          + `system.args[1]` The output path.\n          + `system.args[2]` The url to snapshot.\n          + `system.args[3]` The selector to watch for to signal page completion.\n          + `system.args[4]` The overall timeout \\(milliseconds\\).\n          + `system.args[5]` The interval \\(milliseconds\\) to watch for the selector.\n          + `system.args[6]` A flag indicating jQuery selectors should be supported.\n          + `system.args[7]` A flag indicating verbose output is desired.\n          + `system.args[8]` A custom module to load.\n\n        `\"object\"` If an object is supplied, it has the following properties:\n          + `script` This must be one of the following values:\n            + `\"removeScripts\"` This runs the default snapshot script with an output filter that removes all script tags are removed from the html snapshot before it is saved.\n            + `\"customFilter\"` This runs the default snapshot script, but allows you to supply any output filter.\n          + `module` This property is required only if you supplied a value of `\"customFilter\"` for the `script` property. This must be an absolute path to a PhantomJS module you supply. Your module will be `require`d and called as a function to filter the html snapshot output. Your module's function will receive the entire raw html content as a single input string, and must return the filtered html content.\n\n        customFilter Example:\n        ```javascript\n        // option snippet showing snapshotScript object with \"customFilter\":\n        {\n          snapshotScript: {\n            script: \"customFilter\",\n            module: \"/path/to/myFilter.js\"\n          }\n        }\n\n        // in myFilter.js:\n        module.exports = function(content) {\n          return content.replace(/someregex/g, \"somereplacement\"); // remove or replace anything\n        }\n        ```\n        A more complete example using custom options is available [here](/examples/custom).\n\n  + `verbose`\n    + default: `false`\n    + Specifies to turn on extended console output in the PhantomJS process for debugging purposes. Can be applied to all pages, or just specific page(s). It is recommended to do this one page at a time, as the output can be large, and interleaved with parallel processes. See following explanation of types for how to debug just one page, and also [this example](/examples/verbose).\n\n        The value can be one of these *javascript types*:\n\n        `\"boolean\"` If the value is a boolean, it is used for every page. Note that if it is any scalar type such as \"string\" or \"number\", it will be interpreted as a boolean using javascript rules. Coerced string values \"true\", \"yes\", and \"1\" are specifically true, all others are false.\n\n        `\"object\"` If the value is an object, it is interpreted as key/value pairs where the key must match the url (or path in the case of robots.txt style) found by the input generator. This allows you to specify the use of jQuery for individual pages. The reserved key \"__default\" allows you to specify a default jQuery usage so you don't have to specify usage for every individual page.\n\n        `\"function\"` If the value is a function, it is called for every page and passed a single argument that is the url (or path in the case of robots.txt style) found in the input. The function must return a value to use for this option for the page it is given. The value returned for a given page must be a boolean.\n\n### Process Control Options\n\n  + `timeout`\n    + default: 10000 \\(milliseconds\\)\n    + Specifies the time to wait for the selector to become visible.\n\n        The value can be one of these *javascript types*:\n\n        `\"number\"` If the value is a number, it is used for every page in the website.      \n\n        `\"object\"` If the value is an object, it is interpreted as key/value pairs where the key must match the url (or path in the case of robots.txt style) found by the input generator. This allows you to specify timeouts for individual pages. The reserved key \"__default\" allows you to specify the default timeout so you don't have to specify a timeout for every individual page.\n\n        `\"function\"` If the value is a function, it is called for every page and passed a single argument that is the url (or path in the case of robots.txt style) found in the input. The function must return a value to use for this option for the page it is given. The value returned for a given page must be a number.\n\n  + `processLimit`\n    + default: 4\n    + Limits the number of child PhantomJS processes that can ever be actively running in parallel. A value of 1 effectively forces the snapshots to be taken in series (only one at a time). Useful if you need to limit the number of processes spawned by this library. Experiment with what works best. One guideline suggests about [4 per CPU](http://stackoverflow.com/questions/9961254/how-to-manage-a-pool-of-phantomjs-instances).\n\n  + `checkInterval`\n    + default: 250 (milliseconds)\n    + Specifies the rate at which the PhantomJS script checks to see if the selector is visible yet. Applies to all pages.\n\n  + `pollInterval`\n    + default: 500 (milliseconds)\n    + Specifies the rate at which html-snapshots checks to see if a PhantomJS script has completed. Applies to all pages.\n\n  + `phantomjsOptions`\n    + default: \"\"\n    + Specifies options to give to PhantomJS. Can specify per page or for all pages. Since PhantomJS instances run per page, it is possible to specify different PhantomJS options per page. Useful for debugging PhantomJS scripts on a specific page.\n    For PhantomJS options syntax, checkout the [current options](http://phantomjs.org/api/command-line.html).\n    Checkout [the source](https://github.com/ariya/phantomjs/blob/master/src/config.cpp#L49) for PhantomJS options coming next.\n\n        The value can be one of these *javascript types*:\n\n        `\"string\"` If the value is a string, it is a single option string used for every page.\n\n        `\"array\"` If the value is an array, it can contain multiple option strings used for every page.\n\n        `\"object\"` If the value is an object, it is interpreted as key/value pairs where the key must match the url (or path in the case of robots.txt style) found by the input generator. This allows you to specify PhantomJS options for individual pages. The reserved key \"__default\" allows you to specify default options so you don't have to specify options for every individual page. The values can be either a string \\(for a single option\\), or an array \\(for multiple options \\).\n\n        `\"function\"` If the value is a function, it is called for every page and passed a single argument that is the url (or path in the case of robots.txt style) found in the input. The function must return a value to use for this option for the page it is given. The value returned for a given page must be either a string or an array.\n\n        Multiple Options Examples:\n        ```javascript\n        // option snippet showing multiple options for all pages\n        {\n          phantomjsOptions: [\"--load-images=false\", \"--ignore-ssl-errors=true\"]\n        }\n\n        // option snippet showing multiple options for one page only (object notation)\n        {\n          phantomjsOptions: {\n            // key must exactly match the page as defined in the input (sitemap, array, robots, etc)\n            \"http://mysite.com/mypage\": [\"--load-images=false\", \"--ignore-ssl-errors=true\"],\n          }\n        }\n        ```\n        An example demonstrating how to **debug** a PhantomJS script is available [here](/examples/debug-phantomjs). It also demonstrates per-page option usage.\n\n  + `phantomjs`\n    + default: A package local reference to PhantomJS.\n    + Specifies the PhantomJS executable to run. Applies to all pages. Override this if you want to supply a path to a different version of PhantomJS. To reference PhantomJS globally in your environment, just use the value, \"phantomjs\". Remember, it must be found in your environment path to execute.\n  See [PhantomJS](http://phantomjs.org/) for more information.\n  Also [PhantomJS 2](https://github.com/ariya/phantomjs/wiki/PhantomJS-2).\n\n## Example Rewrite Rule\nHere is an example apache rewrite rule for rewriting \\_escaped\\_fragment\\_ requests to the snapshots directory on your server.\n```\n<ifModule mod_rewrite.c>\n  RewriteCond %{QUERY_STRING} ^_escaped_fragment_=(.*)$\n  RewriteCond %{REQUEST_URI} !^/snapshots [NC]\n  RewriteRule ^(.*)/?$ /snapshots/$1 [L]\n</ifModule>\n```\nThis serves the snapshot to any request for a url (perhaps found by a bot in your robots.txt or sitemap.xml) to the snapshot output directory. In this example, no translation is done, it simply takes the request as is and serves its corresponding snapshot. So a request for `http://mysite.com/?_escaped_fragment_=` serves the mysite.com homepage snapshot.\n\n### Connect-modrewrite\nYou can also refer `_escaped_fragment_` requests to your snapshots in ExpressJS with a similar method using [connect-modrewrite](https://github.com/tinganho/connect-modrewrite) middleware. Here is an analogous example of a connect-modrewrite rule:\n```javascript\n  '^(.*)\\\\?_escaped_fragment_=.*$ /snapshots/$1 [NC L]'\n```\n\n### Middleware Example\nAn ExpressJS middleware example using html-snapshots can be found at [wpspa/server/middleware/snapshots.js](https://github.com/localnerve/wpspa/blob/master/server/middleware/snapshots.js).   \nHere is the [article](/docs/example-heroku-redis.md) on how this middleware works with html-snapshots.\n\n## License\nThis software is free to use under the LocalNerve, LLC MIT license. See the [LICENSE file](/LICENSE) for license text and copyright information.\n\nThird-party open source code used are listed in the [package.json file](/package.json).\n",
  "readmeFilename": "README.md",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/localnerve/html-snapshots.git"
  },
  "scripts": {
    "coverage": "istanbul cover -- _mocha test/mocha/**/*.js --recursive --reporter spec",
    "lint": "eslint .",
    "test": "mocha test/mocha/**/*.js --recursive --reporter spec",
    "test:async": "mocha test/mocha/async/test.js --reporter spec",
    "test:common": "mocha test/mocha/common/*.js --reporter spec",
    "test:html-snapshots": "mocha test/mocha/html-snapshots/*.js --reporter spec",
    "test:input-generators": "mocha test/mocha/input-generators/*.js --reporter spec",
    "validate": "npm ls"
  },
  "version": "0.14.0"
}
